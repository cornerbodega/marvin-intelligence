import FullLayout from "../src/layouts/FullLayout";
import Head from "next/head";
import "../styles/style.scss";
import "../styles/layout/_header.scss";
import "../styles/landing/scss/style.scss";

import { UserProvider, useUser } from "@auth0/nextjs-auth0/client";

import "../styles/globals.css";

// import IntelliUserContext from "../context/IntelliUserContext/intelliUserContext";

function MyApp({ Component, pageProps }) {
  // useEffect(() => {
  //   if (!_userId) {
  //     const guestUserId = `guest_user_${window.tabId}_${Date.now().toString()}`;
  //     setUserId(guestUserId);
  //     loadPagedResults();
  //   }
  // }, [_userId]);
  // const [uniqueId, setUniqueId] = useState("");

  // useEffect(() => {
  //   let currentId = localStorage.getItem("uniqueId");
  //   if (!currentId) {
  //     currentId = uuidv4();
  //     localStorage.setItem("uniqueId", currentId);
  //   }
  //   setUniqueId(currentId);
  // }, []);
  return (
    // <IntelliUserContext.Provider value={uniqueId}>
    <UserProvider>
      <AppContent Component={Component} pageProps={pageProps} />
    </UserProvider>
    // </IntelliUserContext.Provider>
  );
}

function AppContent({ Component, pageProps }) {
  // const { user, error, isLoading } = useUser();

  // const userId = user?.sub
  //   ? user.sub
  //   : `guest_user_${window.tabId}_${Date.now().toString()}`;

  return (
    <>
      <Head>
        {/* <title>Intelligence</title> */}
        <meta name="description" content="Generated by create next app" />
        <link rel="icon" href="/favicon.ico" />
      </Head>

      <FullLayout>
        <Component {...pageProps} />
      </FullLayout>
    </>
  );
}

export default MyApp;
